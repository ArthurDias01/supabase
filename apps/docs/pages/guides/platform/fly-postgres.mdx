import Layout from '~/layouts/DefaultGuideLayout'

export const meta = {
  id: 'fly-postgres',
  title: 'Fly Postgres',
  description: 'Deploy Supabase projects on the Fly.io platform',
}

<Admonition type="note">

Fly Postgres is currently in private alpha. Submit [this form](https://forms.supabase.com/fly-postgres) if you'd like to request early access.

</Admonition>

Fly Postgres databases are deployed on the Fly.io edge network. Fly Postgres is supported in [every region](https://fly.io/docs/reference/regions/) where Fly.io operates.

## Quickstart

1. Install the latest version of the [Fly CLI](https://fly.io/docs/hands-on/install-flyctl/)
2. Authenticate via the CLI: `flyctl auth login`
3. Set up a new Fly Postgres application with `flyctl extensions supabase create`. The CLI will prompt for the Fly organization, app name and region to launch the database in.
4. Once the provisioning is complete, the database connection string is displayed. Add this as an environment variable to connect to the database from your Fly applications.
5. Access the Supabase dashboard by running `flyctl extensions supabase dashboard <app-name>`

## Connecting to your database

If your network supports IPv6, connect directly to your Fly Postgres database, as its domain name resolves to an IPv6 address which can be directly used from within your Fly applications.

If your network only supports IPv4, utilize Supavisor instead of connecting to the database directly. Supavisor's domain name resolves to an IPv4 address, allowing networks without IPv6 support to connect.

To find your database's connection strings, visit the Supabase [database settings page](https://supabase.com/dashboard/project/_/settings/database).

## Studio support

Access the Supabase studio by running the following command: `flyctl extensions supabase dashboard <app-name>`. This command authenticates with Fly via OAuth and then logs you into the Supabase dashboard.

In the dashboard, you gain access to several powerful tools, including:

- SQL editor: Run SQL queries against your database.
- Table editor: Create, edit and delete tables and columns.
- Log explorer: Inspect real-time logs for your database.
- Postgres upgrades: Easily upgrade your Fly Postgres instance to the latest version.
- Compute upgrades: Scale the compute resources allocated to your database.

## Permissions

Supabase and Fly organizations have a direct one-to-one relationship. When you launch your first Fly Postgres database, it triggers the automatic creation of a corresponding Supabase organization if one does not already exist.

User accounts on Supabase are also created on demand. Every Fly user gets a unique Supabase account, and this account is separate from any Supabase accounts you might already have.

Upon launching a Fly Postgres database, the initiating user is granted the owner role within the new Supabase organization. All subsequent users are added with the `developer` role. Roles can be adjusted in the Supabase dashboard as required.

## Pricing

Each Fly user is entitled to one free Fly Postgres database. To create additional databases, upgrade your Supabase organization to a paid plan.

Fly Postgres databases are priced exactly the same as projects launched via Supabase. For detailed pricing information, visit the [Supabase pricing page](https://supabase.com/pricing).

## Limitations

When using Fly Postgres, please be aware of the current restrictions:

- [Network restrictions](/docs/guides/platform/network-restrictions) are not supported
- Currently, only the database, Supavisor, and Postgrest are supported. Support for additional Supabase products such as Realtime, Storage, and Auth is planned for the near future.
- New projects can only be launched using the Fly CLI and not via the Supabase studio.

export const Page = ({ children }) => <Layout meta={meta} children={children} />

export default Page
